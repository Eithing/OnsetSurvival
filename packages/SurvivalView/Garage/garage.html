<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="garage.css" />
</head>
<body>
    <div class="parent-container">
        <div class="container-fluid">
            <div class="container">
                <div class="sbutton">Quitter</div>
                <h1>Garage</h1>
                <div id="allvehicles" class="inner scroll">
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="./../Ressources/Js/garage.js"></script>
    <script>
        try {
            ue == null
        } catch (err) {
            window.ue = {
                game: {
                    callevent: console.log
                }
            }
        }

        function newEl(tagType) {
            return document.createElement(tagType);
        }

        function mathclamp(num, min, max) {
            if (num < min) {
                num = min
            } else if (num > max) {
                num = max    
            }
            
            return num
        }

        document.getElementsByClassName("sbutton")[0].addEventListener('click', (event) => {
            ue.game.callevent("SetGarageVisibility");
        }, false);
        class MouseTracker {
        constructor() {
            this.position = {
                x: 0,
                y: 0
            }
            this.targetElement = null;
            this.leftClick = false;
            this.rightClick = false;
            this.middleClick = false;
            this.currentIdShow = null
            this.moveHandler = (evt) => {
                this.position.x = evt.pageX;
                this.position.y = evt.pageY;
                this.targetElement = evt.target;
            }

            let clickSwap = (button, bool) => {
                if (button == 0)
                    this.leftClick = bool;
                if (button == 1)
                    this.middleClick = bool;
                if (button == 2)
                    this.rightClick = bool;
            }

            let downposition
            let downinterval
            this.mouseDownHandler = (evt) => {
                clickSwap(evt.button, true);
                if (evt.target.id == "allvehicles") {
                    downposition = this.position.x
                    downinterval = setInterval(() => {
                        document.getElementById("allvehicles").scrollLeft = document.getElementById("allvehicles").scrollLeft-((this.position.x-downposition));
                        downposition = this.position.x
                    }, 1000 / 60)
                }
            }
            this.mouseUpHandler = (evt) => {
                clickSwap(evt.button, false);
                clearInterval(downinterval);
            }


            document.addEventListener('mousemove', this.moveHandler);
            document.addEventListener('mousedown', this.mouseDownHandler);
            document.addEventListener('mouseup', this.mouseUpHandler);
        }

        disableContextMenu() {
            document.oncontextmenu = function() {
                return false;
            }
        }

        enableContextMenu() {
            document.oncontextmenu = null;
        }

        destroy() {
            document.removeEventListener('mousemove', this.moveHandler);
            document.removeEventListener('mousedown', this.mouseDownHandler);
            document.removeEventListener('mouseup', this.mouseUpHandler);
        }
    }

        /* EXEMPLE */
        var mouse = new MouseTracker();

        mouse.disableContextMenu()

        var garage = new Garage();
    </script>
</body>
</html>